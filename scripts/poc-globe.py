import turtle
import random
import math

radius = 200

turtle.tracer(20000, 0)  # ultra speed

screen = turtle.Screen()

map_point = (-81.361403, 28.780853)
polygons = [
    [(-174.73, -82.75), (-155.57, -82.49), (-157.47, -81.07), (-151.05, -80.5), (-150.92, -79.99), (-155.93, -80.3), (-158.88, -78.1), (-158.49, -76.74), (-128.63, -74.29), (-127.3, -72.81), (-106.62, -74.84), (-101.77, -74.63), (-103.84, -72.63), (-100.2, -71.33), (-76.58, -73.04), (-76.07, -69.52), (-72.2, -70.59), (-73.46, -69.53), (-72.19, -68.51), (-67.88, -68.87), (-69.6, -67.71), (-68.68, -66.43), (-64.55, -65.16), (-62.77, -62.49), (-61.42, -63.65), (-61.45, -62.19), (-57.7, -61.42), (-60.15, -63.42), (-56.46, -62.48), (-54.66, -63.6), (-64.53, -67.7), (-60.05, -70.24), (-60.35, -74.66), (-77.03, -78.82), (-74.82, -80.38), (-67.09, -77.82), (-65.02, -79.88), (-59.73, -79.3), (-59.51, -81.12),
     (-61.73, -81.4), (-60.1, -81.93), (-60.72, -82.93), (-45.09, -81.94), (-32.92, -80.02), (-37.1, -79.22), (-33.71, -76.82), (-19.19, -75.0), (-16.67, -72.02), (-13.41, -72.29), (-10.3, -70.44), (-2.77, -69.79), (-0.45, -71.13), (0.98, -69.55), (16.27, -69.21), (25.5, -70.48), (32.32, -69.54), (33.44, -68.17), (38.64, -69.55), (53.61, -65.36), (69.79, -67.32), (69.22, -71.84), (78.88, -67.7), (92.29, -65.21), (99.36, -66.14), (102.86, -64.63), (116.12, -66.65), (135.29, -65.63), (170.68, -70.98), (170.08, -74.05), (163.17, -75.12), (164.94, -77.73), (166.76, -76.66), (169.71, -77.87), (161.15, -79.5), (161.26, -80.98), (180.26, -83.93), (180.5, -90.0), (-180.48, -90.15), (-180.16, -83.88), (-168.18, -84.22)],
    # [(33.38, -26.93), (27.32, -33.96), (18.11, -34.7), (11.28, -18.09), (13.34, -11.07), (11.61, -5.3), (8.25, -0.79), (9.41, 3.08), (4.08, 5.91), (-7.85, 3.91), (-16.71, 10.96), (-18.03, 14.73), (-16.53, 17.91), (-17.43, 21.97), (-13.63, 27.85), (-18.07, 27.15), (-18.46, 28.95), (-14.94, 28.32), (-13.42, 29.74), (-13.46, 28.07), (-10.82, 29.45), (-6.42, 35.87), (-9.46, 36.83), (-9.64, 43.37), (-1.83, 44.14), (-1.89, 46.01), (-5.26, 48.48), (-2.11, 50.11), (-6.13, 49.92), (-5.26, 53.92), (-6.14, 51.78), (-10.82, 51.63), (-10.45, 54.57), (-6.99, 55.78), (-7.33, 58.62), (-2.09, 59.68), (-2.05, 56.39), (2.32, 51.55), (4.95, 53.83), (8.16, 54.16), (7.83, 57.07), (10.78, 58.2), (5.39, 58.13), (4.75, 62.46), (14.16, 67.7), (12.56, 67.4), (12.73, 68.46), (18.92, 70.7), (28.17, 71.54), (43.46, 66.87), (43.28, 69.17), (46.18, 68.89), (46.51, 67.32), (48.78, 69.99), (50.71, 68.83), (58.68, 69.47), (50.93, 71.89), (58.81, 76.35), (69.21, 77.16), (56.01, 72.28), (58.11, 70.61), (66.34, 69.49), (66.21, 71.34), (70.07, 73.94), (73.21, 72.13), (77.01, 73.88), (76.21, 72.47), (95.3, 77.54), (98.08, 76.65), (101.43, 77.69), (90.99, 79.42), (90.08, 81.71), (96.0, 81.75), (107.78, 78.64), (108.17, 77.23), (112.61, 77.1), (114.35, 76.02), (113.73, 74.03), (128.04, 73.94), (131.19, 71.27), (138.66, 72.13), (139.61, 74.27), (135.29, 74.92), (135.19, 76.03), (141.54, 76.63), (151.02, 75.62), (150.4, 74.37), (142.59, 74.33), (152.56, 71.33), (180.39, 69.3), (179.88, 62.3), (170.44, 59.47), (165.5, 59.69), (162.45, 54.39), (154.18, 48.26), (156.03, 51.27), (155.52, 56.89), (156.58, 58.21), (158.06, 58.51), (158.92, 58.93), (161.06, 60.36), (159.12, 61.41), (155.21, 59.93), (155.31, 58.71), (143.22, 58.87), (138.91, 56.53), (138.65, 54.81), (143.43, 54.35), (145.21, 48.66), (143.46, 48.79), (143.05, 45.18), (150.94, 45.89), (143.44, 41.55), (141.58, 42.06), (142.49, 39.57), (141.26, 35.4), (132.27, 32.43), (130.72, 29.77), (128.17, 32.51), (128.7, 34.24), (125.8, 32.95), (124.69, 39.04), (121.09, 38.24), (122.98, 36.75), (119.86, 35.0), (122.9, 29.91), (120.19, 25.12), (111.02, 20.92), (109.92, 17.81), (108.21, 18.48), (109.17, 20.94), (106.31, 19.47), (109.56, 14.87), (109.42, 11.08), (106.88, 8.26), (104.71, 8.1), (100.5, 12.35), (99.7, 10.2), (103.86, 5.08), (104.96, -1.39), (108.78, -2.74), (106.44, -3.54), (106.34, -5.48), (115.63, -6.39), (114.79, -7.48), (115.93, -7.89), (127.46, -7.02), (128.35, -8.63), (122.69, -11.38), (121.25, -10.35), (123.56, -9.06), (120.97, -9.43), (120.49, -10.79), (118.49, -9.35), (107.82, -8.22), (100.14, -3.71), (94.71, 5.21), (95.21, 6.41), (97.72, 5.68), (100.81, 2.78), (97.81, 7.67), (97.24, 15.66), (93.86, 15.67), (91.34, 21.7), (87.38, 21.07), (80.65, 15.3), (80.33, 10.29), (82.38, 7.03), (80.37, 5.47), (79.42, 8.69), (77.52, 7.58), (76.09, 8.73), (72.36, 20.8), (70.2, 20.43), (66.19, 24.95), (56.86, 25.62), (60.32, 22.59), (58.17, 18.67), (43.9, 12.12), (44.81, 10.94), (50.96, 12.45), (51.88, 10.31), (48.35, 4.17), (40.69, -3.04), (39.83, -8.46), (41.33, -14.86), (35.24, -20.22), (35.98, -24.17), (33.38, -26.93)],
    # [(166.04, -45.61), (172.38, -40.09), (174.71, -40.4), (173.31, -39.54), (174.32, -37.77), (172.49, -34.0), (178.91, -37.36), (170.99, -46.32), (167.48, -47.76), (166.04, -45.61)],
    [(-53.04, -34.12), (-56.69, -35.26), (-57.22, -38.47), (-61.44, -39.49), (-67.07, -46.17), (-65.34, -48.11), (-68.54, -51.39), (-63.55, -55.18), (-67.86, -56.36), (-74.89, -53.3), (-76.21, -46.69), (-71.96, -32.57), (-70.65, -19.83), (-76.38, -14.87), (-81.65, -6.1), (-81.39, -0.97), (-77.78, 3.68), (-78.85, 7.74), (-81.95, 6.9), (-88.1, 12.67), (-103.72, 17.91), (-112.18, 28.28), (-108.97, 23.1), (-112.38, 24.14), (-117.82, 32.94), (-120.8, 33.68), (-124.14, 38.68), (-125.19, 48.24), (-131.2, 53.91), (-130.68, 51.6), (-132.54, 52.45), (-138.44, 58.59), (-149.18, 59.51), (-155.44, 55.32), (-155.2, 57.32), (-159.15, 54.52), (-171.08, 52.14), (-158.11, 58.01), (-167.85, 59.93), (-165.01, 63.4), (-163.17, 63.57), (-162.62, 63.89), (-168.41, 65.27), (-164.29, 67.1), (-167.2, 68.64), (-156.4, 71.9), (-136.68, 69.39), (-128.07, 71.07), (-117.46, 69.46), (-119.49, 71.79), (-123.11, 70.59), (-126.32, 72.12), (-124.88, 74.81), (-117.72, 74.75), (-123.34, 75.89), (-119.22, 77.79), (-110.31, 79.25), (-109.33, 77.64), (-112.99, 76.75), (-108.72, 77.31), (-104.98, 75.73), (-106.56, 77.66), (-105.59, 79.78), (-98.82, 78.52), (-96.05, 79.03), (-97.16, 80.46), (-94.32, 81.82), (-79.94, 83.44), (-60.71, 82.38),
     (-30.68, 84.09), (-21.62, 83.18), (-20.62, 81.89), (-11.06, 81.82), (-18.48, 79.22), (-16.9, 74.96), (-21.54, 72.92), (-21.28, 70.09), (-39.14, 65.11), (-43.78, 59.33), (-48.44, 60.34), (-51.9, 63.39), (-57.58, 74.48), (-72.94, 77.16), (-72.86, 78.86), (-67.15, 79.63), (-67.68, 80.37), (-74.01, 78.99), (-77.58, 77.45), (-79.95, 74.2), (-68.29, 71.07), (-66.34, 68.77), (-61.0, 67.05), (-64.61, 64.62), (-64.51, 60.99), (-60.88, 56.6), (-55.55, 53.75), (-55.18, 50.36), (-52.2, 47.31), (-53.5, 46.13), (-59.53, 47.21), (-57.76, 50.89), (-63.72, 48.92), (-63.49, 47.04), (-61.18, 48.09), (-59.41, 45.68), (-65.35, 43.03), (-67.12, 44.19), (-69.85, 43.28), (-69.6, 40.93), (-73.49, 40.11), (-75.13, 34.95), (-80.68, 31.47), (-80.31, 24.52), (-82.18, 24.2), (-84.04, 29.54), (-93.62, 29.27), (-96.81, 27.3), (-97.28, 22.27), (-94.31, 18.68), (-91.25, 19.56), (-90.09, 21.71), (-86.46, 21.77), (-87.88, 16.39), (-83.02, 15.6), (-83.31, 11.29), (-81.28, 9.28), (-77.09, 9.07), (-71.66, 12.93), (-68.01, 12.68), (-67.79, 10.99), (-60.39, 11.81), (-60.24, 9.12), (-51.52, 5.03), (-48.98, 0.32), (-35.05, -4.89), (-34.5, -8.58), (-38.41, -13.47), (-40.54, -22.21), (-47.45, -25.29), (-48.42, -28.9), (-53.04, -34.12)],
    # [(112.71, -26.32), (113.69, -21.51), (120.74, -19.17), (125.78, -13.56), (128.88, -14.33), (130.29, -10.69), (135.14, -11.68), (136.99, -10.56), (137.43, -14.33), (136.06, -14.71), (140.17, -17.2), (140.9, -16.01), (141.79, -9.71), (137.37, -8.8), (137.58, -5.77), (132.68, -4.5), (131.49, -1.99), (130.88, -4.35), (126.51, -4.29), (125.47, -2.44), (122.28, -2.08), (124.53, -6.12), (121.75, -5.91), (120.87, -4.19), (120.37, -7.53), (118.28, -2.77), (119.98, 1.38), (123.96, 1.42), (125.49, 4.23), (125.68, 1.27), (123.61, -0.2), (126.54, -2.57), (129.45, -2.29), (130.02, -1.24), (128.5, -0.17), (128.56, -1.96), (126.91, -1.78), (127.11, 1.9), (128.58, 3.1), (129.9, 0.2), (136.02, -0.24), (146.53, -5.13), (151.09, -4.53), (149.52, -0.86), (154.09, -3.79), (152.24, -5.95), (147.76, -7.22), (149.73, -8.97), (151.53, -8.14), (151.08, -11.11), (144.6, -8.14), (142.68, -9.82), (146.82, -18.69), (153.85, -24.88), (153.44, -31.52), (150.32, -37.85), (144.11, -39.09), (146.35, -40.66), (148.71, -39.7), (148.23, -43.59), (145.73, -43.94), (143.53, -39.32), (140.15, -38.33), (138.74, -36.09), (136.34, -36.37), (131.23, -32.02), (115.73, -35.22), (112.71, -26.32)],
    # [(163.68, -20.59), (166.68, -19.92), (168.62, -21.67), (167.12, -21.62), (167.38, -23.14), (163.68, -20.59)],
    # [(176.88, -17.56), (177.1, -16.58), (180.48, -16.01), (178.75, -19.44), (176.88, -17.56)],
    # [(166.29, -15.8), (167.71, -13.26), (170.17, -20.64), (169.36, -20.54), (166.29, -15.8), (167.55, -14.8), (167.57, -14.89), (167.66, -14.8), (167.64, -14.8), (167.55, -14.8)],
    # [(42.86, -21.68), (44.03, -15.95), (49.6, -11.71), (50.98, -15.42), (47.44, -25.28), (43.76, -25.41), (42.86, -21.68)],
    # [(156.27, -6.16), (161.02, -7.89), (162.81, -11.07), (156.34, -8.63), (154.08, -4.91), (156.27, -6.16), (158.88, -8.56), (158.75, -8.5), (158.64, -8.43), (158.73, -8.67), (158.88, -8.56), (157.98, -7.68), (157.96, -7.58), (157.93, -7.64), (157.98, -7.68)],
    # [(108.53, 1.39), (116.61, 7.45), (120.28, 12.71), (119.3, 16.43), (121.79, 19.78), (123.02, 17.15), (122.09, 15.53), (125.99, 12.39), (126.63, 6.07), (125.26, 5.11), (123.21, 6.95), (118.37, 3.83), (119.47, 0.87), (116.28, -4.52), (109.93, -3.34), (108.33, -1.74), (108.53, 1.39)],
    [(-62.23, 12.21), (-61.48, 14.19), (-63.74, 17.52), (-63.12, 18.76),
     (-61.38, 18.0), (-60.33, 14.54), (-61.28, 11.7), (-62.23, 12.21)],
    [(-65.32, 18.76), (-63.9, 19.06), (-64.26, 17.37), (-71.5, 17.14), (-74.8, 18.02), (-73.93, 19.7), (-77.86, 19.38), (-79.0, 21.08), (-85.37, 21.99), (-80.54, 23.59), (-74.15, 20.81), (-73.35, 21.92), (-76.37, 23.23), (-76.81, 24.86),
     (-77.45, 23.25), (-78.9, 24.44), (-77.61, 25.56), (-79.45, 26.87), (-77.5, 27.4), (-74.46, 23.31), (-71.22, 22.07), (-72.86, 20.59), (-65.32, 18.76), (-76.08, 24.16), (-76.0, 24.17), (-76.0, 24.18), (-76.0, 24.19), (-76.08, 24.16)],
    # [(-171.3, 64.12), (-168.26, 63.1), (-180.28, 64.65), (-180.41, 69.26), (-169.43, 66.51), (-171.3, 64.12)],
    [(-24.5, 65.0), (-23.04, 66.92), (-16.04, 67.03),
     (-13.06, 65.14), (-18.68, 62.91), (-24.5, 65.0)],
    [(10.23, 79.52), (22.99, 80.97), (30.2, 78.93), (23.26, 78.72), (25.39, 77.65),
     (22.82, 76.78), (19.84, 78.12), (16.64, 76.08), (10.85, 78.04), (10.23, 79.52)],
]

# colors = ['red', 'orange', 'yellow', 'green', 'blue', 'purple', 'white', 'black']
colors = [(101, 149, 48.0)]


def project(long, lat):
    phi = (90 - lat) * (math.pi/180)
    theta = (long + 180) * (math.pi / 180)
    x = -radius * math.sin(phi) * math.cos(theta)
    z = radius * math.sin(phi) * math.sin(theta)
    y = radius * math.cos(phi)
    return (x, y, z)


def draw_globe(offset):
    for ocean in range(10, 0, -1):
        scale = radius * ocean / 10.0
        cscale = (20-ocean) / 10.0

        penup()
        setposition(0, -scale)
        begin_fill()
        color((20 * cscale, 61 * cscale, 130 * cscale))
        circle(scale)
        end_fill()
        pendown()

    i = 0
    for polygon in polygons:
        # c = (random.random(), random.random(), random.random())
        # color(c)
        color(colors[i % len(colors)])
        i = i + 1

        leftmost = 180
        rightmost = -180
        for point in polygon:
            long = point[1] + offset
            if long < leftmost:
                leftmost = long
            elif long > rightmost:
                rightmost = long
        _x1, _y1, leftz = project(leftmost, 0)
        _x2, _y2, rightz = project(rightmost, 0)

        # if leftz < 0 and rightz < 0:
        # continue

        penup()
        long, lat = polygon[0]
        x, y, z = project(long + offset, lat)

        setposition(x, y)
        pendown()

        begin_fill()
        for point in polygon:
            # lat, long = point
            long, lat = point

            x, y, z = project(long + offset, lat)

            setposition(x, y)
        end_fill()

        # Draw a marker over our point of interest
        penup()
        color('red')
        x, y, z = project(map_point[0] + offset, map_point[1])
        setposition(x, y)


def draw_star():
    penup()
    setposition(random.randint(-200, 200), random.randint(-200, 200))
    pendown()
    dot(random.randint(1, 5), 255, 255, 255, random.randint(0, 50) / 100.0)


def draw_stars():
    random.seed(42)
    color('white')
    for i in range(200):
        draw_star()


def draw_sun(radius):

    penup()
    setposition(-150 - radius * 2, 150)
    begin_fill()
    for i in range(24):
        forward(radius / 2)
        left(30)
        backward(radius)
        right(15)
    end_fill()
    pendown()


bgcolor('black')


for i in range(3600):
    clear()
    draw_stars()

    color('red')
    draw_sun(20)
    color('orange')
    draw_sun(17)
    color('yellow')
    draw_sun(14)

    radius = min(150, i) * (math.sin(i / 70.0) / 4 + 1)
    draw_globe(math.floor(math.sin(i / 30.0) * 30) - 15)
    screen.update()
